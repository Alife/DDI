var loadingImage="loading.gif";var closeButton="close.gif";var isModalLoaded=false;var isPopupModalLoaded=false;var PopupModalLoading=false;function getPageScroll(){var a;if(self.pageYOffset){a=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop}else{if(document.body){a=document.body.scrollTop}}}arrayPageScroll=new Array("",a);return arrayPageScroll}function getPageSize(){var c,a;if(window.innerHeight&&window.scrollMaxY){c=document.body.scrollWidth;a=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){c=document.body.scrollWidth;a=document.body.scrollHeight}else{c=document.body.offsetWidth;a=document.body.offsetHeight}}var b,d;if(self.innerHeight){b=self.innerWidth;d=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){b=document.documentElement.clientWidth;d=document.documentElement.clientHeight}else{if(document.body){b=document.body.clientWidth;d=document.body.clientHeight}}}if(a<d){pageHeight=d}else{pageHeight=a}if(c<b){pageWidth=b}else{pageWidth=c}arrayPageSize=new Array(pageWidth,pageHeight,b,d);return arrayPageSize}function pause(b){var a=new Date();var c=a.getTime()+b;while(true){a=new Date();if(a.getTime()>c){return}}}function getKey(a){if(a==null){keycode=event.keyCode}else{keycode=a.which}key=String.fromCharCode(keycode).toLowerCase();if(key=="x"){hideContentModal()}}function listenKey(){document.onkeypress=getKey}function showModal(b){try{var j=document.getElementById("overlay");var g=document.getElementById("modal");var e=document.getElementById("modal-caption");var k=document.getElementById("modal-image");var a=document.getElementById("loadingImage");var h=document.getElementById("modal-details");var f=getPageSize();var d=getPageScroll();if(a){a.style.top=(d[1]+((f[3]-35-a.height)/2)+"px");a.style.left=(((f[0]-20-a.width)/2)+"px");a.style.display="block"}j.style.height=(f[1]+"px");j.style.width=(f[2]+"px");j.style.display="block";imgPreload=new Image();imgPreload.onload=function(){k.src=b;var m=d[1]+((f[3]-35-imgPreload.height)/2);var l=((f[0]-20-imgPreload.width)/2);g.style.top=(m<0)?"0px":m+"px";g.style.left=(l<0)?"0px":l+"px";h.style.width=imgPreload.width+"px";if(navigator.appVersion.indexOf("MSIE")!=-1){pause(250)}if(a){a.style.display="none"}selects=document.getElementsByTagName("select");g.style.display="block";f=getPageSize();j.style.height=(f[1]+"px");listenKey();return false};imgPreload.src=b}catch(c){}}function hideModal(){objOverlay=document.getElementById("overlay");objModal=document.getElementById("modal");objOverlay.style.display="none";objModal.style.display="none";selects=document.getElementsByTagName("select");for(i=0;i!=selects.length;i++){selects[i].style.visibility="visible"}document.onkeypress=""}function hideContentModal(a){objModal=document.getElementById(a+"-modal");document.getElementById(a+"-overlay").style.display="none";objModal.style.display="none";selects=document.getElementsByTagName("select");for(i=0;i!=selects.length;i++){selects[i].style.visibility="visible"}}function initModal(){try{var m=document.getElementById("loading-modal");var l=document.createElement("div");l.setAttribute("id","overlay");l.className="overlay";l.style.display="none";l.style.position="absolute";l.style.top="0";l.style.left="0";l.style.zIndex="101";l.style.width="100%";m.insertBefore(l,m.firstChild);var d=getPageSize();var e=getPageScroll();var g=new Image();g.onload=function(){var o=document.createElement("a");o.setAttribute("href","#");o.onclick=function(){hideModal();return false};l.appendChild(o);var n=document.createElement("img");n.src=loadingImage;n.setAttribute("id","loading-image");n.style.position="absolute";n.style.zIndex="150";o.appendChild(n);g.onload=function(){};return false};g.src=loadingImage;var f=document.createElement("div");f.setAttribute("id","modal");f.className="modal";f.style.display="none";f.style.position="absolute";f.style.zIndex="102";m.insertBefore(f,l.nextSibling);var a=document.createElement("a");a.setAttribute("href","#");a.setAttribute("title","Click to close");a.onclick=function(){hideModal();return false};f.appendChild(a);var h=new Image();h.onload=function(){var n=document.createElement("img");n.src=closeButton;n.setAttribute("id","close-button");n.style.position="absolute";n.style.zIndex="200";a.appendChild(n);return false};h.src=closeButton;var k=document.createElement("img");k.setAttribute("id","modal-image");a.appendChild(k);var j=document.createElement("div");j.setAttribute("id","modal-details");j.className="modal-details";f.appendChild(j);var c=document.createElement("div");c.setAttribute("id","modal-caption");c.className="modal-caption";c.style.display="none";j.appendChild(c);showModal("/portal/images/modal/loading.gif")}catch(b){}}function alertModal(a,b,c){if(a==null){a="content-modal"}if(b==null){b="message-container"}if(isModalLoaded){if(isPopupModalLoaded){initContentModal(a);showContentModal(a,b,c);isPopupModalLoaded=false}else{Ext.get("login-modal-modal").slideOut();isModalLoaded=false}}else{isModalLoaded=true;initContentModal(a);showContentModal(a,b,c)}}function showContentModal(l,u,d){try{var c=(u?u:"message-container");var k=document.getElementById(l);var b=document.getElementById(l+"-modal");var e=document.getElementById(l+"-modal-caption");var r=document.getElementById(l+"-modal-image");var g=document.getElementById(l+"-loadingImage");var a=document.getElementById(c);var j=a.style.width.substring(0,a.style.width.indexOf("px"));var m=a.style.height.substring(0,a.style.width.indexOf("px"));var s=getPageSize();var n=getPageScroll();if(g){g.style.top=(n[1]+((s[3]-35-g.height)/2)+"px");g.style.left=(((s[0]-20-g.width)/2)+"px");g.style.display="block"}var h=Ext.get("dashboardnav").getAnchorXY();var o=h[1]+83;var t=h[0]+0;b.style.top=(o<0)?"0px":o+"px";b.style.left=(t<0)?"0px":t+"px";b.style.width=j+"px";if(navigator.appVersion.indexOf("MSIE")!=-1){pause(250)}if(g){g.style.display="none"}selects=document.getElementsByTagName("select");var v=true;try{if(!document.getElementById(l).style.display=="none"){v=false}}catch(f){}b.style.display="block";if(!PopupModalLoading){Ext.get(b).slideIn("t",{useDisplay:true,duration:1});k.style.display="block"}var q=d;Ext.Ajax.request({url:d,success:function(p,w){if(!PopupModalLoading){document.getElementById("loginIframe").innerHTML=p.responseText}if(document.getElementById("window_loginIframe")!=null){document.getElementById("window_loginIframe").innerHTML=p.responseText;isPopupModalLoaded=true}}});listenKey()}catch(f){}}function initContentModal(j){try{if(j==null){j="content-modal"}var l=document.getElementById(j);var g=l.getElementsByTagName("div")[0];var a=g.style.width.substring(0,g.style.width.indexOf("px"));var h=g.style.height.substring(0,g.style.width.indexOf("px"));var e=document.getElementById(j+"-overlay");if(!e){var k=document.createElement("div");k.setAttribute("id",j+"-overlay");k.className="overlay";k.style.display="none";k.style.position="absolute";k.style.top="0";k.style.left="0";k.style.zIndex="101";k.style.width="100%";k.onclick=function(){hideContentModal(j);return false};l.insertBefore(k,l.firstChild);var f=getPageSize();var d=getPageScroll();var c=document.createElement("div");c.setAttribute("id",j+"-modal");c.className="modal";c.style.display="none";c.style.position="absolute";c.style.zIndex="102";c.style.width=a+"px";c.style.height=h+"px";c.innerHTML=g.innerHTML;l.insertBefore(c,k.nextSibling)}}catch(b){}}function getComponentSize(c){var a;var e;var f;var d;var b=document.getElementById(c);a=b.clientWidth;e=b.clientHeight;d=b.offsetLeft;f=b.offsetTop;return new Array(a,e,d,f)}function createComponentModal(n){try{var m=document.getElementById("loading-modal");var a="/portal/images/modal/loading.gif";var j=getComponentSize(n);var f=(j[3]);var q=(j[2]);var o=(j[1]);var k=(j[0]);var p=document.getElementById(n+"overlay");if(!p){p=document.createElement("div");p.setAttribute("id",n+"overlay");p.className="overlay";p.style.position="absolute";p.style.display="block"}p.style.height=(o+"px");p.style.width=(k+"px");m.insertBefore(p,m.firstChild);var h=document.getElementById(n+"modal");if(!h){h=document.createElement("div");h.setAttribute("id",n+"modal");h.className="modal";p.appendChild(h)}var l=new Image();var d="100";var c=document.getElementById(n+"loading-image");if(!c){c=document.createElement("img");c.src=a;c.setAttribute("id",n+"loading-image");c.style.position="relative";c.style.width=d+"px";h.appendChild(c)}l.onload=function(){};if(c){c.style.display="block"}var b=((o-35-l.height)/2);var g=((k-20-d)/2);h.style.top=(b<0)?"0px":b+"px";h.style.left=(g<0)?"0px":g+"px";h.style.width=d+"px";h.style.display="block";h.style.position="relative";if(navigator.appVersion.indexOf("MSIE")!=-1){pause(250)}p.style.top=(j[3]+"px");p.style.left=(j[2]+"px");p.style.height=(j[1]+"px");p.style.width=(j[0]+"px");p.style.zIndex=0;p.style.position="absolute";return false;l.src=a}catch(e){}};